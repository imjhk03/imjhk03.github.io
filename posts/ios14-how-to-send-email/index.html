<!DOCTYPE html><html lang="ko-KR" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="iOS 14부터 달라진 앱에서 이메일 보내는 방법" /><meta name="author" content="Joohee Kim" /><meta property="og:locale" content="ko_KR" /><meta name="description" content="iOS 14에서 달라진 앱에서 이메일 보내는 방법을 알아봅시다" /><meta property="og:description" content="iOS 14에서 달라진 앱에서 이메일 보내는 방법을 알아봅시다" /><link rel="canonical" href="https://imjhk03.github.io/posts/ios14-how-to-send-email/" /><meta property="og:url" content="https://imjhk03.github.io/posts/ios14-how-to-send-email/" /><meta property="og:site_name" content="Joohee Kim’s Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-02-22T00:00:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="iOS 14부터 달라진 앱에서 이메일 보내는 방법" /><meta name="twitter:site" content="@_jooheekim_" /><meta name="twitter:creator" content="@Joohee Kim" /><meta name="google-site-verification" content="google26638d8b728847ea.html" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Joohee Kim"},"dateModified":"2022-02-06T04:03:52+00:00","datePublished":"2021-02-22T00:00:00+00:00","description":"iOS 14에서 달라진 앱에서 이메일 보내는 방법을 알아봅시다","headline":"iOS 14부터 달라진 앱에서 이메일 보내는 방법","mainEntityOfPage":{"@type":"WebPage","@id":"https://imjhk03.github.io/posts/ios14-how-to-send-email/"},"url":"https://imjhk03.github.io/posts/ios14-how-to-send-email/"}</script><title>iOS 14부터 달라진 앱에서 이메일 보내는 방법 | Joohee Kim's Blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Joohee Kim's Blog"><meta name="application-name" content="Joohee Kim's Blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/avatar.jpeg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">Joohee Kim's Blog</a></div><div class="site-subtitle font-italic">Create something, craft well</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>홈</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>카테고리</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>태그</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>아카이브</span> </a><li class="nav-item"> <a href="/glossary/" class="nav-link"> <i class="fa-fw fas fa-book-open ml-xl-3 mr-xl-3 unloaded"></i> <span>GLOSSARY</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>정보</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/imjhk03" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/_jooheekim_" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['imjhk03','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> 홈 </a> </span> <span>iOS 14부터 달라진 앱에서 이메일 보내는 방법</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> 포스트</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="검색..."> </span> <span id="search-cancel" >취소</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>iOS 14부터 달라진 앱에서 이메일 보내는 방법</h1><div class="post-meta text-muted"> <span> 게시 <em class="" data-ts="1613952000" data-df="YYYY/MM/DD" data-toggle="tooltip" data-placement="bottom"> 2021/02/22 </em> </span> <span> 업데이트 <em class="" data-ts="1644120232" data-df="YYYY/MM/DD" data-toggle="tooltip" data-placement="bottom"> 2022/02/06 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href=""></a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1614 단어"> <em>8 분</em>읽는 시간</span></div></div></div><div class="post-content"><p>iOS 14에서는 기본 이메일 앱이 아닌 다른 서드파티 앱을 기본 이메일로 설정할 수 있습니다. 즉, 지메일, Outlook, Spark 등의 메일 앱을 이제 기본 이메일 앱으로 대체할 수 있습니다.</p><p>이로 인해 앱에서는 기본적으로 메일 앱으로 보내는 방식에서, 대응할 앱을 추가로 보낼 방법을 지원해야 합니다. 예를 들어, 앱을 사용하다가 버그 혹은 문의에 대해서 이메일 보내기를 했을 때, 사용자가 기본 메일 앱이 있으면 기본 메일 앱으로 보내지만, 없다면 지메일 혹은 다른 서드파티 이메일 앱을 통해서 보낼 수 있게 해야 합니다. 만약 사용자가 사용하는 이메일 앱에 대응할 수 없다면 안내 팝업을 띄워주면 사용자가 다른 방법을 통해서 이메일 보낼 수 있게 안내해주면 좋을 것 같습니다. 오늘 글에서 어떻게 코드를 작성할지 소개하겠습니다.</p><h1 id="기본-이메일-앱으로-보내는-방법">기본 이메일 앱으로 보내는 방법</h1><p><a href="/assets/img/2021/02/22/image1.jpeg" class="popup img-link "><img data-src="/assets/img/2021/02/22/image1.jpeg" alt="Email Confirm Interface" class="lazyload" data-proofer-ignore></a> <em>이메일 구성 인터페이스</em></p><p>애플에서 제공하는 라이브러리 중에 <code class="language-plaintext highlighter-rouge">MessageUI</code> 프레임워크 안에 <code class="language-plaintext highlighter-rouge">MFMailComposeViewController</code>를 이용해서 기본 이메일 앱을 통해서 이메일 보내는 것을 다룹니다. 받는 사람, 제목, 메시지 내용을 담아서 화면을 보여주지만, 이메일을 보내지 않습니다. 사용자가 보내기 액션을 취하면 그때 이메일이 보내집니다. 아래 예제 코드입니다.</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre><td class="rouge-code"><pre><span class="kd">import</span> <span class="kt">MessageUI</span>

<span class="kd">class</span> <span class="kt">ViewController</span><span class="p">:</span> <span class="kt">UIViewController</span> <span class="p">{</span>

    <span class="o">...</span>

    <span class="kd">func</span> <span class="nf">sendEmail</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">composer</span> <span class="o">=</span> <span class="kt">MFMailComposeViewController</span><span class="p">()</span>
        <span class="k">let</span> <span class="nv">receiver</span> <span class="o">=</span> <span class="s">"imjhk03@gmail.com"</span>
        <span class="k">let</span> <span class="nv">subject</span> <span class="o">=</span> <span class="s">"Bug report: "</span>
        <span class="k">let</span> <span class="nv">appVersion</span> <span class="o">=</span> <span class="kt">Bundle</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">infoDictionary</span><span class="p">?[</span><span class="s">"CFBundleShortVersionString"</span><span class="p">]</span> <span class="p">??</span> <span class="mf">1.0</span>    <span class="c1">// 앱 버전</span>
        <span class="k">let</span> <span class="nv">osVersion</span> <span class="o">=</span> <span class="kt">UIDevice</span><span class="p">()</span><span class="o">.</span><span class="n">systemVersion</span>    <span class="c1">// 기기의 os 버전</span>
        <span class="k">let</span> <span class="nv">message</span> <span class="o">=</span> <span class="s">"""
        Hello,

        App Version: </span><span class="se">\(</span><span class="n">appVersion</span><span class="se">)</span><span class="s">
        iOS Version: </span><span class="se">\(</span><span class="n">osVersion</span><span class="se">)</span><span class="s">
        """</span>
        
        <span class="k">if</span> <span class="kt">MFMailComposeViewController</span><span class="o">.</span><span class="nf">canSendMail</span><span class="p">()</span> <span class="p">{</span>
            <span class="n">composerVC</span><span class="o">.</span><span class="n">mailComposeDelegate</span> <span class="o">=</span> <span class="k">self</span>

            <span class="c1">// Configure the fields of the interface.</span>
            <span class="n">composerVC</span><span class="o">.</span><span class="nf">setToRecipients</span><span class="p">([</span><span class="n">receiver</span><span class="p">])</span>
            <span class="n">composerVC</span><span class="o">.</span><span class="nf">setSubject</span><span class="p">(</span><span class="n">subject</span><span class="p">)</span>
            <span class="n">composerVC</span><span class="o">.</span><span class="nf">setMessageBody</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="nv">isHTML</span><span class="p">:</span> <span class="kc">false</span><span class="p">)</span>
            
            <span class="c1">// Present the view controller modally.</span>
            <span class="nf">present</span><span class="p">(</span><span class="n">composer</span><span class="p">,</span> <span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nv">completion</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="c1">// show failure alert</span>
        <span class="p">}</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></table></code></div></div><p>이메일을 보내는 동작을 하는 Swift 파일에서 <code class="language-plaintext highlighter-rouge">import MessageUI</code>를 추가하고 <code class="language-plaintext highlighter-rouge">MFMailComposeViewControllerDelegate</code> 프로토콜을 적용해야 합니다. 이메일 작성 화면을 보여주기 전에 항상 <code class="language-plaintext highlighter-rouge">canSendMail</code> 함수를 이용해서 사용자의 기기에서 이메일을 보낼 수 있는지 판단합니다. 보낼 수 없다면 사용자에게 안내해줍니다. 추가로 앱 버전 혹은 iOS 버전과 같이 필요한 정보들이 있을 수 있는데, 앱 버전은 <code class="language-plaintext highlighter-rouge">Bundle</code>에서 가져오고, iOS 버전은 <code class="language-plaintext highlighter-rouge">UIDevice</code>에서 가져올 수 있습니다.</p><p><code class="language-plaintext highlighter-rouge">MFMailComposeViewControllerDelegat</code> 프로토콜을 적용해야 이메일 작성 화면을 dismiss 처리할 수 있는데, 바로 <code class="language-plaintext highlighter-rouge">mailComposeController(_:didFinishWith:error:)</code> 함수 안에서 dismiss 처리를 해야 합니다. 그리고 응답에 따라서 추가 액션을 취할 수 있습니다. (성공했을 때 성공 안내 메시지 노출 등)</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="c1">// MARK: - MFMailComposeViewControllerDelegate</span>
<span class="kd">extension</span> <span class="kt">ViewController</span><span class="p">:</span> <span class="kt">MFMailComposeViewControllerDelegate</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">mailComposeController</span><span class="p">(</span><span class="n">_</span> <span class="nv">controller</span><span class="p">:</span> <span class="kt">MFMailComposeViewController</span><span class="p">,</span> <span class="n">didFinishWith</span> <span class="nv">result</span><span class="p">:</span> <span class="kt">MFMailComposeResult</span><span class="p">,</span> <span class="nv">error</span><span class="p">:</span> <span class="kt">Error</span><span class="p">?)</span> <span class="p">{</span>
        <span class="c1">// Check the result or perform other tasks.</span>
        <span class="k">if</span> <span class="n">result</span> <span class="o">==</span> <span class="o">.</span><span class="n">sent</span> <span class="p">{</span>
            
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            
        <span class="p">}</span>
        
        <span class="c1">// Dismiss the mail compose view controller.</span>
        <span class="n">controller</span><span class="o">.</span><span class="nf">dismiss</span><span class="p">(</span><span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p><br /></p><h1 id="서드파티-메일-앱으로-보내는-방법">서드파티 메일 앱으로 보내는 방법</h1><p>다른 방법으로 이메일 작성하는 것은 <code class="language-plaintext highlighter-rouge">mailto</code> 스킴을 이용해서 URL을 만들고 엽니다. 만든 URL을 이용해서 다른 앱을 열어서 메일을 보내는 방법입니다. 예시 코드는 Gmail, Microsoft Outlook, 그리고 Spark 앱 url 만드는 방법입니다.</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="k">let</span> <span class="nv">subjectEncoded</span> <span class="o">=</span> <span class="n">subject</span><span class="o">.</span><span class="nf">addingPercentEncoding</span><span class="p">(</span><span class="nv">withAllowedCharacters</span><span class="p">:</span> <span class="o">.</span><span class="n">urlHostAllowed</span><span class="p">)</span> <span class="p">??</span> <span class="n">subject</span>
<span class="k">let</span> <span class="nv">bodyEncoded</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="nf">addingPercentEncoding</span><span class="p">(</span><span class="nv">withAllowedCharacters</span><span class="p">:</span> <span class="o">.</span><span class="n">urlHostAllowed</span><span class="p">)</span> <span class="p">??</span> <span class="n">body</span>
        
<span class="k">let</span> <span class="nv">gmailUrl</span> <span class="o">=</span> <span class="kt">URL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"googlegmail://co?to=</span><span class="se">\(</span><span class="n">receiver</span><span class="se">)</span><span class="s">&amp;subject=</span><span class="se">\(</span><span class="n">subjectEncoded</span><span class="se">)</span><span class="s">&amp;body=</span><span class="se">\(</span><span class="n">bodyEncoded</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">outlookUrl</span> <span class="o">=</span> <span class="kt">URL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"ms-outlook://compose?to=</span><span class="se">\(</span><span class="n">receiver</span><span class="se">)</span><span class="s">&amp;subject=</span><span class="se">\(</span><span class="n">subjectEncoded</span><span class="se">)</span><span class="s">&amp;body=</span><span class="se">\(</span><span class="n">bodyEncoded</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">sparkUrl</span> <span class="o">=</span> <span class="kt">URL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"readdle-spark://compose?recipient=</span><span class="se">\(</span><span class="n">receiver</span><span class="se">)</span><span class="s">&amp;subject=</span><span class="se">\(</span><span class="n">subjectEncoded</span><span class="se">)</span><span class="s">&amp;body=</span><span class="se">\(</span><span class="n">bodyEncoded</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
</pre></table></code></div></div><p>URL을 이용해서 앱을 여는 방법이기 때문에 <code class="language-plaintext highlighter-rouge">Info.plist</code> 에서 관련 스킴을 추가해야 열 수 있습니다.</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="o">&lt;</span><span class="n">key</span><span class="o">&gt;</span><span class="kt">LSApplicationQueriesSchemes</span><span class="o">&lt;/</span><span class="n">key</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">array</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span><span class="n">googlegmail</span><span class="o">&lt;/</span><span class="n">string</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span><span class="n">ms</span><span class="o">-</span><span class="n">outlook</span><span class="o">&lt;/</span><span class="n">string</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span><span class="n">readdle</span><span class="o">-</span><span class="n">spark</span><span class="o">&lt;/</span><span class="n">string</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">array</span><span class="o">&gt;</span>
</pre></table></code></div></div><p>앱에서 열 수 있는지 판단을 하고 열 수 있는 메일 앱 URL을 사용하면 됩니다. AlertSheet를 이용해서 사용 가능한 이메일 앱의 목록을 보여주고 선택하면 해당 이메일 앱으로 가도록 하는 방법을 사용하겠습니다. 목록으로 나타날 때 표시하는 제목과 URL을 묶은 tuple로 만들고, 앱에서 열 수 있는 앱들 목록을 <code class="language-plaintext highlighter-rouge">canOpenURL(_:)</code>을 이용해서 걸러냈습니다.</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="k">let</span> <span class="nv">sendViaGmail</span> <span class="o">=</span> <span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="n">gmailUrl</span><span class="p">,</span> <span class="nv">title</span><span class="p">:</span> <span class="s">"Gmail"</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">sendViaOutlook</span> <span class="o">=</span> <span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="n">outlookUrl</span><span class="p">,</span> <span class="nv">title</span><span class="p">:</span> <span class="s">"Outlook"</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">sendViaSpark</span> <span class="o">=</span> <span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="n">sparkUrl</span><span class="p">,</span> <span class="nv">title</span><span class="p">:</span> <span class="s">"Spark"</span><span class="p">)</span>
        
<span class="k">let</span> <span class="nv">availableApps</span> <span class="o">=</span> <span class="p">[</span><span class="n">sendViaGmail</span><span class="p">,</span> <span class="n">sendViaOutlook</span><span class="p">,</span> <span class="n">sendViaSpark</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span> <span class="p">{</span> <span class="n">availableApp</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="k">in</span>
    <span class="k">guard</span> <span class="k">let</span> <span class="nv">url</span> <span class="o">=</span> <span class="n">availableApp</span><span class="o">.</span><span class="n">url</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="kc">false</span> <span class="p">}</span>
    <span class="k">return</span> <span class="kt">UIApplication</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="nf">canOpenURL</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="p">}</span>
</pre></table></code></div></div><p>열 수 있는 앱들 목록을 이용해서 alertSheet을 만들어서 보여주거나, 만약 열 수 있는 앱들이 없다면 이메일을 보낼 수 없는 안내 alert를 보여주도록 하겠습니다. AlertSheet 목록에서 선택하면 <code class="language-plaintext highlighter-rouge">open(_:options:completionHandler:)</code> 이용해서 앱을 엽니다. <code class="language-plaintext highlighter-rouge">Info.plist</code>에 설정되어 있지 않으면 아무 동작하지 않기 때문에 꼭 설정해주세요.</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre><td class="rouge-code"><pre><span class="k">guard</span> <span class="o">!</span><span class="n">availableApps</span><span class="o">.</span><span class="n">isEmpty</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nf">presentAlertCanNotSendEmail</span><span class="p">()</span>
    <span class="k">return</span>
<span class="p">}</span>
        
<span class="nf">presentAlertSheetThirdPartyEmailApps</span><span class="p">(</span><span class="n">availableApps</span><span class="p">)</span>

<span class="o">...</span>
    
<span class="kd">private</span> <span class="kd">func</span> <span class="nf">presentAlertCanNotSendEmail</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">alert</span> <span class="o">=</span> <span class="kt">UIAlertController</span><span class="p">(</span><span class="nv">title</span><span class="p">:</span> <span class="s">"Alert"</span><span class="p">,</span> 
                                  <span class="nv">message</span><span class="p">:</span> <span class="s">"It seems there is no way to send email in your device. Please send email to bugReport@email.com"</span><span class="p">,</span> 
                                  <span class="nv">preferredStyle</span><span class="p">:</span> <span class="o">.</span><span class="n">alert</span><span class="p">)</span>
    <span class="n">alert</span><span class="o">.</span><span class="nf">addAction</span><span class="p">(</span><span class="kt">UIAlertAction</span><span class="p">(</span><span class="nv">title</span><span class="p">:</span> <span class="s">"OK"</span><span class="p">,</span> <span class="nv">style</span><span class="p">:</span> <span class="o">.</span><span class="k">default</span><span class="p">))</span>
    <span class="nf">present</span><span class="p">(</span><span class="n">alert</span><span class="p">,</span> <span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
<span class="p">}</span>
    
<span class="kd">private</span> <span class="kd">func</span> <span class="nf">presentAlertSheetThirdPartyEmailApps</span><span class="p">(</span><span class="n">_</span> <span class="nv">availableApps</span><span class="p">:</span> <span class="p">[</span><span class="kt">AvailableApps</span><span class="p">])</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">alert</span> <span class="o">=</span> <span class="kt">UIAlertController</span><span class="p">(</span><span class="nv">title</span><span class="p">:</span> <span class="kc">nil</span><span class="p">,</span> <span class="nv">message</span><span class="p">:</span> <span class="kc">nil</span><span class="p">,</span> <span class="nv">preferredStyle</span><span class="p">:</span> <span class="o">.</span><span class="n">actionSheet</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">app</span> <span class="k">in</span> <span class="n">availableApps</span> <span class="p">{</span>
        <span class="n">alert</span><span class="o">.</span><span class="nf">addAction</span><span class="p">(</span><span class="kt">UIAlertAction</span><span class="p">(</span><span class="nv">title</span><span class="p">:</span> <span class="n">app</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="nv">style</span><span class="p">:</span> <span class="o">.</span><span class="k">default</span><span class="p">,</span> <span class="nv">handler</span><span class="p">:</span> <span class="p">{</span> <span class="n">_</span> <span class="k">in</span>
            <span class="k">guard</span> <span class="k">let</span> <span class="nv">url</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">url</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
            <span class="kt">UIApplication</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="nf">open</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="nv">options</span><span class="p">:</span> <span class="p">[:],</span> <span class="nv">completionHandler</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
        <span class="p">}))</span>
    <span class="p">}</span>
    <span class="n">alert</span><span class="o">.</span><span class="nf">addAction</span><span class="p">(</span><span class="kt">UIAlertAction</span><span class="p">(</span><span class="nv">title</span><span class="p">:</span> <span class="s">"Cancel"</span><span class="p">,</span> <span class="nv">style</span><span class="p">:</span> <span class="o">.</span><span class="n">cancel</span><span class="p">,</span> <span class="nv">handler</span><span class="p">:</span> <span class="kc">nil</span><span class="p">))</span>
        
    <span class="nf">present</span><span class="p">(</span><span class="n">alert</span><span class="p">,</span> <span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
<span class="p">}</span>
</pre></table></code></div></div><p>적용해보면 아래와 같은 스크린샷 모습을 볼 수 있습니다. <a href="/assets/img/2021/02/22/image2.jpeg" class="popup img-link "><img data-src="/assets/img/2021/02/22/image2.jpeg" alt="Third Party App Alert Sheet and No available App Alert" class="lazyload" data-proofer-ignore></a></p><p>Warning: 이메일 앱을 보내는 것을 테스트하고 싶다면 iOS 시뮬레이터가 아닌 실 기기에서 테스트해야 합니다.</p><p>iOS 14에서부터 서드파티 앱을 기본 이메일 앱을 설정할 수 있는데, 이로 인해 대응할 방법을 소개했습니다. 전체 코드를 보고 싶다면 <a href="https://github.com/imjhk03/ThirdPartyMailSupport/tree/main" target="_blank">깃헙</a>에서 확인할 수 있습니다.</p></div><div class="post-tail-wrapper text-muted"><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/ios/" class="post-tag no-text-decoration" >iOS</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> 이 기사는 저작권자의 <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> 라이센스를 따릅니다.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">공유하기</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=iOS 14부터 달라진 앱에서 이메일 보내는 방법 - Joohee Kim's Blog&url=https%3A%2F%2Fimjhk03.github.io%2Fposts%2Fios14-how-to-send-email%2F&via=_jooheekim_" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="링크 복사하기" data-title-succeed="링크가 복사되었습니다!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">최근 업데이트</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/macbook-setup/">나의 새로운 Mac 설정 목록 (Setup my personal Mac)</a><li><a href="/posts/multiple-pages-xcode-playground/">Multiple Pages Xcode Playground</a><li><a href="/posts/not-using-multiple-monitors/">듀얼 모니터 보다 싱글 모니터</a><li><a href="/posts/solve-ios15-button-title-showing/">iOS 15에서 UIButton의 title이 Button으로 나타나는 현상 해결 방법</a><li><a href="/posts/ios14-how-to-send-email-eng/">How to send emails from iOS 14</a></ul></div><div id="access-tags"><div class="panel-heading">인기 태그</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ios/">iOS</a> <a class="post-tag" href="/tags/swift/">swift</a> <a class="post-tag" href="/tags/xcode/">xcode</a> <a class="post-tag" href="/tags/blog/">blog</a> <a class="post-tag" href="/tags/cocoapods/">cocoaPods</a> <a class="post-tag" href="/tags/strings/">strings</a> <a class="post-tag" href="/tags/restrospect/">restrospect</a> <a class="post-tag" href="/tags/swift-playground/">swift playground</a> <a class="post-tag" href="/tags/swiftui/">swiftui</a> <a class="post-tag" href="/tags/ui-development/">ui development</a></div></div></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>관련된 글</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/scrollview-contentsize-storyboard/"><div class="card-body"> <em class="small" data-ts="1578614400" data-df="YYYY/MM/DD" > 2020/01/10 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>How to deal with scroll view content size with storyboard</h3><div class="text-muted small"><p> UIScrollView is very useful when presenting content that are larger than a single screen. I’ve been using it to support iPhone SE users or iPhone 8 users to let them scroll and see contents. I pre...</p></div></div></a></div><div class="card"> <a href="/posts/add-refesh-control-to-collection-view/"><div class="card-body"> <em class="small" data-ts="1579392000" data-df="YYYY/MM/DD" > 2020/01/19 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Add Refresh Control to Collection View</h3><div class="text-muted small"><p> I’ve been currently rebuilding a project that I’m working on, and there were some UI issues when refreshing datas. UIRefreshControl was implied for pull-to-refresh style, but the project deployment...</p></div></div></a></div><div class="card"> <a href="/posts/info-plist-localization/"><div class="card-body"> <em class="small" data-ts="1579824000" data-df="YYYY/MM/DD" > 2020/01/24 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Info.plist Localization</h3><div class="text-muted small"><p> Recently, one of our app got rejected by App Store Connect, because it needed to update NSPhotoLibraryUsageDescription content. There was not enough reason why our app need to access user’s photo l...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/ios14-how-to-send-email-eng/" class="btn btn-outline-primary" prompt="이전 글"><p>How to send emails from iOS 14</p></a> <a href="/posts/how-to-join-array-of-strings/" class="btn btn-outline-primary" prompt="다음 글"><p>How to Join an Array of Strings</p></a></div><script type="text/javascript"> $(function () { const origin = "https://giscus.app"; const iframe = "iframe.giscus-frame"; const lightTheme = "light"; const darkTheme = "dark_dimmed"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "imjhk03/imjhk03.github.io", "data-repo-id": "MDEwOlJlcG9zaXRvcnkzNDI2MzQ3MDQ=", "data-category": "Comments", "data-category-id": "DIC_kwDOFGww0M4CTtIF", "data-mapping": "pathname", "data-reactions-enabled": "1", "data-emit-metadata": "0", "data-theme": initTheme, "data-input-position": "bottom", "data-lang": "", "crossorigin": "anonymous", "async": "" }; let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementById("tail-wrapper").appendChild(giscusScript); addEventListener("message", (event) => { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); }); </script></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">인기 태그</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ios/">iOS</a> <a class="post-tag" href="/tags/swift/">swift</a> <a class="post-tag" href="/tags/xcode/">xcode</a> <a class="post-tag" href="/tags/blog/">blog</a> <a class="post-tag" href="/tags/cocoapods/">cocoaPods</a> <a class="post-tag" href="/tags/strings/">strings</a> <a class="post-tag" href="/tags/restrospect/">restrospect</a> <a class="post-tag" href="/tags/swift-playground/">swift playground</a> <a class="post-tag" href="/tags/swiftui/">swiftui</a> <a class="post-tag" href="/tags/ui-development/">ui development</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://twitter.com/username">Joohee Kim</a>. <span data-toggle="tooltip" data-placement="top" title="명시되지 않는 한 이 사이트의 블로그 게시물은 작성자의 Creative Commons Attribution 4.0 International(CC BY 4.0) 라이선스에 따라 사용이 허가되었습니다.">일부 권리 보유</span></p></div><div class="footer-right"><p class="mb-0">Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">새 버전의 콘텐츠를 사용할 수 있습니다.</p><button type="button" class="btn btn-primary" aria-label="Update"> 업데이트 </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">검색 결과가 없습니다.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/ko.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-155758599-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-155758599-1'); }); </script>
